{"version":3,"sources":["webpack:///./public/components/asyncUserTree/select/index.js","webpack:///./public/components/asyncUserTree/select/styles/select.less"],"names":[],"mappings":";;;;;AAAA;;AAEA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA,oDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,iCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F,mCAAkC,0BAA0B,0CAA0C,gBAAgB,OAAO,kBAAkB,EAAE,aAAa,EAAE,OAAO,wBAAwB,EAAE;;AAEjM,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,kDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,2CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA,oJ,6CAAA;AACA,EAAC,EAAE;;;AAGH;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB;AACpB,UAAS;AACT;AACA,qBAAoB;AACpB,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA4B;AAC5B,kBAAiB;AACjB,gCAA+B,2BAA2B;AAC1D;AACA;AACA;AACA,6BAA4B;AAC5B,kBAAiB;AACjB,gCAA+B,6BAA6B;AAC5D;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uCAAsC;AACtC;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,kBAAiB,iDAAiD,iCAAiC,EAAE;AACrG;AACA;AACA;AACA,sBAAqB,oCAAoC;AACzD;AACA;AACA,0BAAyB,gEAAgE;AACzF;AACA;AACA;AACA;AACA,0BAAyB,+DAA+D;AACxF;AACA;AACA;AACA;AACA,0BAAyB,kEAAkE;AAC3F;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,iCAAgC,eAAe;AAC/C,6DAA4D;AAC5D;AACA;AACA,0BAAyB,mEAAmE;AAC5F;AACA;AACA,8BAA6B,8CAA8C;AAC3E;AACA;AACA,kCAAiC,+EAA+E;AAChH;AACA;AACA;AACA,kCAAiC,gCAAgC;AACjE;AACA;AACA;AACA;AACA;AACA,0CAAyC,oFAAoF;AAC7H;AACA;AACA,8CAA6C,qDAAqD;AAClG;AACA;AACA,mFAAkF;AAClF;AACA,8CAA6C,EAAE;AAC/C;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA,0BAAyB,iEAAiE;AAC1F;AACA;AACA,8BAA6B,8CAA8C;AAC3E;AACA;AACA,kCAAiC,+EAA+E;AAChH;AACA;AACA;AACA,kCAAiC,uGAAuG;AACxI;AACA;AACA;AACA;AACA;AACA,8BAA6B,8DAA8D;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,EAAC;;AAED;;AAEA,0B;;;;;;;AClYA,0C","file":"5.5.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _dropdown = require('antd/lib/dropdown');\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nvar _button = require('antd/lib/button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nrequire('antd/lib/dropdown/style');\n\nrequire('antd/lib/button/style');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _addDomEventListener = require('add-dom-event-listener');\n\nvar _addDomEventListener2 = _interopRequireDefault(_addDomEventListener);\n\nvar _loader = require('loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nrequire('antd/lib/select/style');\n\nrequire('./styles/select.less');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AsyncTree = (0, _loader2[\"default\"])(function (a) {\n    return require(['../index'], a);\n}); //需要Select的样式\n\n\nvar isArray = Array.isArray;\n\nvar App = function (_React$Component) {\n    _inherits(App, _React$Component);\n\n    function App(props) {\n        _classCallCheck(this, App);\n\n        var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\n        var _props$checkedKeys = props.checkedKeys,\n            checkedKeys = _props$checkedKeys === undefined ? [] : _props$checkedKeys,\n            _props$checkedNames = props.checkedNames,\n            checkedNames = _props$checkedNames === undefined ? [] : _props$checkedNames,\n            _props$selectedKeys = props.selectedKeys,\n            selectedKeys = _props$selectedKeys === undefined ? [] : _props$selectedKeys,\n            _props$selectedNames = props.selectedNames,\n            selectedNames = _props$selectedNames === undefined ? [] : _props$selectedNames;\n\n        _this.state = {\n            selectedKeys: selectedKeys,\n            checkedKeys: checkedKeys\n        };\n\n        _this.fragCheckedDataRef = _this.checkedDataRef = checkedKeys.map(function (key, index) {\n            return { key: key, name: checkedNames[index] };\n        });\n        _this.fragSelectedDataRef = _this.selectedDataRef = selectedKeys.map(function (key, index) {\n            return { key: key, name: selectedNames[index] };\n        });\n        return _this;\n    }\n\n    _createClass(App, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            this.eventListener = (0, _addDomEventListener2[\"default\"])(document, 'click', function (_ref) {\n                var nativeEvent = _ref.nativeEvent;\n\n                var target = nativeEvent.target || nativeEvent.srcElement;\n                var nosp = true;\n                for (; target; target = target.offsetParent) {\n                    if (target.className.indexOf('stopPropagation') != -1) {\n                        return nosp = false;\n                    }\n                }\n                if (nosp) {\n                    _this2.onCancel();\n                }\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.eventListener.remove();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var _nextProps$checkedKey = nextProps.checkedKeys,\n                checkedKeys = _nextProps$checkedKey === undefined ? [] : _nextProps$checkedKey,\n                _nextProps$selectedKe = nextProps.selectedKeys,\n                selectedKeys = _nextProps$selectedKe === undefined ? [] : _nextProps$selectedKe,\n                _nextProps$checkedNam = nextProps.checkedNames,\n                checkedNames = _nextProps$checkedNam === undefined ? [] : _nextProps$checkedNam,\n                _nextProps$selectedNa = nextProps.selectedNames,\n                selectedNames = _nextProps$selectedNa === undefined ? [] : _nextProps$selectedNa;\n\n            if (isArray(checkedKeys)) {\n                this.fragCheckedDataRef = this.checkedDataRef = checkedKeys.map(function (key, index) {\n                    return { key: key, name: checkedNames[index] };\n                });\n                this.setState({ checkedKeys: checkedKeys });\n            }\n            if (isArray(selectedKeys)) {\n                this.fragSelectedDataRef = this.selectedDataRef = selectedKeys.map(function (key, index) {\n                    return { key: key, name: selectedNames[index] };\n                });\n                this.setState({ selectedKeys: selectedKeys });\n            }\n        }\n    }, {\n        key: 'onCheck',\n        value: function onCheck(checkedDataRef) {\n            var checkedFilter = this.props.checkedFilter;\n            if (checkedFilter) {\n                if (checkedFilter === 'SHOW_PARENT') {\n                    //当父节点下所有子节点都选中时，只返回父节点\n                    var willRemovedKeys = [];\n                    checkedDataRef.forEach(function (item) {\n                        var children = item.children;\n                        if (isArray(children)) {\n                            willRemovedKeys = [].concat(_toConsumableArray(willRemovedKeys), _toConsumableArray(children.map(function (item) {\n                                return item.key;\n                            })));\n                        }\n                    });\n                    checkedDataRef = checkedDataRef.filter(function (item) {\n                        return willRemovedKeys.indexOf(item.key) === -1;\n                    });\n                } else {\n                    //自定义\n                    checkedDataRef = checkedDataRef.filter(checkedFilter);\n                }\n            }\n            this.fragCheckedDataRef = checkedDataRef;\n        }\n    }, {\n        key: 'onSelect',\n        value: function onSelect(selectedDataRef) {\n            var selectedFilter = this.props.selectedFilter;\n            if (selectedFilter) {\n                selectedDataRef = selectedDataRef.filter(selectedFilter);\n            }\n            this.fragSelectedDataRef = selectedDataRef;\n        }\n    }, {\n        key: 'handleDataRef',\n        value: function handleDataRef() {\n            this.checkedDataRef = this.fragCheckedDataRef;\n            this.selectedDataRef = this.fragSelectedDataRef;\n            var checkedDataRef = this.checkedDataRef,\n                selectedDataRef = this.selectedDataRef;\n\n            this.setState({\n                selectedKeys: selectedDataRef.map(function (item) {\n                    return item.key;\n                }),\n                checkedKeys: checkedDataRef.map(function (item) {\n                    return item.key;\n                })\n            });\n            var _props = this.props,\n                onCheck = _props.onCheck,\n                onSelect = _props.onSelect;\n\n            if (onCheck) {\n                onCheck(checkedDataRef);\n            }\n            if (onSelect) {\n                onSelect(selectedDataRef);\n            }\n        }\n    }, {\n        key: 'onOk',\n        value: function onOk() {\n            this.handleDataRef();\n            this.onCancel();\n        }\n    }, {\n        key: 'onRemove',\n        value: function onRemove(index) {\n            var _this3 = this;\n\n            setTimeout(function (u) {\n                _this3.fragCheckedDataRef.splice(index, 1);\n                _this3.handleDataRef();\n            });\n        }\n    }, {\n        key: 'onReset',\n        value: function onReset() {\n            var _this4 = this;\n\n            this.checkedDataRef = [];\n            this.selectedDataRef = [];\n            this.fragSelectedDataRef = [];\n            this.fragCheckedDataRef = [];\n            this.setState({\n                selectedKeys: [],\n                checkedKeys: []\n            }, function () {\n                // 测试缺陷 重置应该包含确定操作\n                _this4.handleDataRef();\n                _this4.onCancel();\n            });\n        }\n    }, {\n        key: 'onDisplay',\n        value: function onDisplay() {\n            this.setState({\n                visible: true\n            });\n        }\n    }, {\n        key: 'onCancel',\n        value: function onCancel() {\n            this.setState({\n                visible: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var state = this.state,\n                props = this.props,\n                checkedDataRef = this.checkedDataRef,\n                selectedDataRef = this.selectedDataRef;\n\n            var width = props.width || 240;\n            var newProps = _extends({}, props, {\n                selectedKeys: state.selectedKeys,\n                checkedKeys: state.checkedKeys,\n                onSelect: this.onSelect.bind(this),\n                onCheck: this.onCheck.bind(this)\n            });\n\n            var overlay = _react2[\"default\"].createElement(\n                'div',\n                { className: 'asynctree stopPropagation', style: { minWidth: Math.max(width, 200) } },\n                _react2[\"default\"].createElement(AsyncTree, newProps),\n                _react2[\"default\"].createElement(\n                    'div',\n                    { className: 'asynctree-controller' },\n                    _react2[\"default\"].createElement(\n                        _button2[\"default\"],\n                        { size: 'small', type: 'primary', onClick: this.onOk.bind(this) },\n                        '\\u786E\\u5B9A'\n                    ),\n                    _react2[\"default\"].createElement(\n                        _button2[\"default\"],\n                        { size: 'small', type: 'red', onClick: this.onReset.bind(this) },\n                        '\\u91CD\\u7F6E'\n                    ),\n                    _react2[\"default\"].createElement(\n                        _button2[\"default\"],\n                        { size: 'small', type: 'ghost', onClick: this.onCancel.bind(this) },\n                        '\\u53D6\\u6D88'\n                    )\n                )\n            );\n\n            var visible = state.visible;\n\n            var dProps = {\n                overlay: overlay,\n                visible: visible,\n                trigger: ['click']\n            };\n\n            var selectClassName = 'ant-select ant-select-enabled stopPropagation';\n            if (visible) {\n                selectClassName = 'ant-select ant-select-open ant-select-enabled stopPropagation';\n            }\n\n            var checkedNames = props.checkedNames,\n                selectedNames = props.selectedNames,\n                placeholder = props.placeholder;\n\n\n            var checkedTitle = [];\n            checkedDataRef.forEach(function (item, index) {\n                if (!item.name) {\n                    item.name = checkedNames[index];\n                }\n                checkedTitle.push(item.name);\n            });\n\n            return _react2[\"default\"].createElement(\n                _dropdown2[\"default\"],\n                dProps,\n                _react2[\"default\"].createElement(\n                    'div',\n                    { className: selectClassName,\n                        style: { width: width },\n                        onClick: this.onDisplay.bind(this) },\n                    props.checkable ? _react2[\"default\"].createElement(\n                        'div',\n                        { className: 'ant-select-selection ant-select-selection--multiple' },\n                        _react2[\"default\"].createElement(\n                            'div',\n                            { className: 'ant-select-selection__rendered' },\n                            checkedDataRef.length === 0 ? _react2[\"default\"].createElement(\n                                'div',\n                                { unselectable: 'unselectable', className: 'ant-select-selection__placeholder' },\n                                placeholder || '全部条件'\n                            ) : _react2[\"default\"].createElement(\n                                'ul',\n                                { title: checkedTitle.join(',') },\n                                checkedDataRef.map(function (_ref2, index) {\n                                    var key = _ref2.key,\n                                        name = _ref2.name;\n                                    return _react2[\"default\"].createElement(\n                                        'li',\n                                        { key: key, unselectable: 'unselectable', className: 'ant-select-selection__choice' },\n                                        _react2[\"default\"].createElement(\n                                            'div',\n                                            { className: 'ant-select-selection__choice__content' },\n                                            name\n                                        ),\n                                        _react2[\"default\"].createElement('span', { className: 'ant-select-selection__choice__remove', onClick: function onClick(e) {\n                                                return _this5.onRemove(index);\n                                            } })\n                                    );\n                                })\n                            )\n                        )\n                    ) : _react2[\"default\"].createElement(\n                        'div',\n                        { className: 'ant-select-selection ant-select-selection--single' },\n                        _react2[\"default\"].createElement(\n                            'div',\n                            { className: 'ant-select-selection__rendered' },\n                            selectedDataRef.length === 0 ? _react2[\"default\"].createElement(\n                                'div',\n                                { unselectable: 'unselectable', className: 'ant-select-selection__placeholder' },\n                                placeholder || '请选择'\n                            ) : _react2[\"default\"].createElement(\n                                'div',\n                                { className: 'ant-select-selection-selected-value', title: selectedDataRef[0].name || selectedNames[0] },\n                                selectedDataRef[0].name || selectedNames[0]\n                            )\n                        ),\n                        _react2[\"default\"].createElement(\n                            'span',\n                            { className: 'ant-select-arrow', unselectable: 'unselectable' },\n                            _react2[\"default\"].createElement('b', null)\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return App;\n}(_react2[\"default\"].Component);\n\n;\n\nexports[\"default\"] = App;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/components/asyncUserTree/select/index.js\n// module id = 590\n// module chunks = 5","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/components/asyncUserTree/select/styles/select.less\n// module id = 591\n// module chunks = 5"],"sourceRoot":""}